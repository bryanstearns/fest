# Place all the behaviors and hooks related to the matching controller here.
# All this logic will automatically be available in application.js.
# You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/

Handlers.register 'Days', class
  constructor: (el) ->
    console.log("Days constructed")
    jQuery('.day .screening').on('click', ->
      screening_id = jQuery(this).attr('id').split('_')[1]
      jQuery('body').modalmanager('loading')

      modal = jQuery('#screening-modal')
      jQuery(document).trigger('handlers:pageUpdating', 'body')

      modal.load('/screenings/' + screening_id, '', ->
        jQuery(document).trigger('handlers:pageUpdated', 'body')
        modal.modal()
      )
    )
